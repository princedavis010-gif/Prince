<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto_Tap v61.8</title>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root { --gold: #f3ba2f; --green: #00ff88; --dia: #00d2ff; --purple: #a020f0; --bg: #010205; }
        * { -webkit-tap-highlight-color: transparent; outline: none; box-sizing: border-box; touch-action: manipulation; }
        body { margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; font-family: 'Segoe UI', sans-serif; color: white; background: var(--bg); transition: 0.8s; }
        
        .coin-wrapper { perspective: 1000px; margin: 35px 0; z-index: 5; }
        .coin-btn { 
            width: 320px; height: 320px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            transition: transform 0.08s ease-out; 
            transform-style: preserve-3d; cursor: pointer;
            background-image: url('https://raw.githubusercontent.com/princedavis010-gif/Prince/refs/heads/main/IMG-20260212-WA0024.jpg');
            background-size: cover; background-position: center; border: none;
            box-shadow: 0 25px 50px rgba(0,0,0,0.8);
        }
        .coin-btn::after {
            content: ''; position: absolute; width: 100%; height: 100%;
            border-radius: 50%; transform: translateZ(-18px); 
            background: #2c2105; box-shadow: inset 0 0 20px black;
        }

        .container { flex: 1; display: none; flex-direction: column; align-items: center; padding: 20px; overflow-y: auto; padding-bottom: 120px; width: 100%; }
        .container.active { display: flex; animation: fadeIn 0.4s ease; }
        .btn-gold { background: linear-gradient(135deg, var(--gold), #bf9524); color: #221a04; padding: 16px; border-radius: 15px; font-weight: 800; border: none; width: 100%; margin-top: 10px; cursor: pointer; text-transform: uppercase; }
        
        /* GREY BUT CLICKABLE STYLE */
        .btn-active-grey { background: #555 !important; color: #888 !important; cursor: pointer !important; }

        .glass-card { background: rgba(255,255,255,0.06); border-radius: 18px; padding: 15px; width: 100%; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.1); text-align: center; }
        .nav { height: 85px; background: #000; display: flex; position: fixed; bottom: 0; width: 100%; border-top: 1px solid #222; z-index: 1000; }
        .nav-item { flex: 1; text-align: center; padding-top: 20px; color: #666; font-size: 10px; font-weight: bold; }
        .nav-item.active { color: var(--gold); }
        .tap-val { position: absolute; color: var(--gold); font-size: 35px; font-weight: 900; animation: floatUp 0.8s ease-out forwards; pointer-events: none; z-index: 1000; text-shadow: 0 0 10px #000; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-160px); } }
        #ad-countdown { display: none; position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.85); border: 1px solid var(--gold); padding: 15px 30px; border-radius: 50px; z-index: 10001; font-weight: bold; color: var(--gold); }
        #bot-modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 85%; background: #111; border: 2px solid var(--gold); border-radius: 20px; z-index: 10000; padding: 25px; text-align: center; }
        .tx-list { text-align: left; font-size: 12px; margin-top: 10px; color: #aaa; }
    </style>
</head>
<body onload="initApp();">
    <div id="ad-countdown">NEXT AD IN: <span id="ad-timer-val">7</span>s</div>
    <div id="bot-modal">
        <h2 style="color:var(--gold); margin:0;">ü§ñ WHILE YOU WERE AWAY</h2>
        <p id="bot-earned-msg" style="font-size:18px; margin:15px 0;"></p>
        <button class="btn-gold" onclick="closeBotModal()">CLAIM</button>
    </div>

    <div id="home" class="container active">
        <div id="balance" style="font-size: 55px; font-weight: 900; color: var(--gold);">0</div>
        <div style="font-size: 20px; color: var(--dia); font-weight: bold;">üíé <span id="diamonds">0</span></div>
        <div id="prem-timer" style="color:var(--green); font-weight:bold; font-size:12px; height:15px;"></div>
        <div class="coin-wrapper">
            <div class="coin-btn" id="coin" onpointerdown="handleTap(event)"></div>
        </div>
        <div id="boost-timer" style="color:var(--purple); font-weight:bold; height:20px;"></div>
        <div style="color:#777; font-size:12px;">‚ö° <span id="energy">1000</span> / 1000</div>
        <button class="btn-gold" style="background: var(--dia); color:#000;" onclick="showDoubleAd()">üì∫ GET FREE 3,000 COINS</button>
    </div>

    <div id="tasks" class="container">
        <h2 style="color:var(--gold);">TASKS</h2>
        <div class="glass-card" style="border: 1px solid var(--purple);">
            <h3 style="color:var(--purple); margin:0;">üë• INVITE FRIENDS</h3>
            <p>Get 10,000 Coins for every friend who joins!</p>
            <button class="btn-gold" style="background:var(--purple); color:white;" onclick="shareInvite()">INVITE A FRIEND</button>
        </div>
        <div class="glass-card">
            <p>Follow @ogprincedavis5081 on TikTok.</p>
            <button class="btn-gold" style="background:#ff0050; color:white;" onclick="doTask('tiktok', 5000)">LIKE AND COMMENT (+5,000)</button>
        </div>
    </div>

    <div id="shop" class="container">
        <h2 style="color:var(--gold);">BOOSTERS</h2>
        <div class="glass-card">
            <h3>ü§ñ AUTO-TAP BOT</h3>
            <button id="bot-purchase-btn" class="btn-gold" onclick="buyBot()">PURCHASE FOR 15,000 COINS</button>
        </div>
        <div class="glass-card">
            <h3>‚ö° WARP BOOST (5X)</h3>
            <p>Daily Left: <span id="boost-count">2</span>/2</p>
            <button class="btn-gold" id="boost-btn" style="background:var(--purple); color:white;" onclick="activateBoost()">ACTIVATE</button>
        </div>
    </div>

    <div id="premium" class="container">
        <h2 style="color:var(--gold);">PREMIUM SHOP</h2>
        <div class="glass-card">
            <p style="color:var(--gold); font-weight:bold; font-size:24px;">ID: <span id="p-suffix">--</span></p>
            <p>Premium Subscription (20x Tap)</p>
            <p>Price: ‚Ç¶200 | OPay: <b>8124647818</b></p>
            <input type="file" id="receipt-upload" accept="image/*" style="display:none;" onchange="uploadReceipt()">
            <button class="btn-gold" id="upload-btn" onclick="document.getElementById('receipt-upload').click()">üìÅ UPLOAD RECEIPT</button>
            <p id="upload-status" style="font-size:12px; color:var(--green); margin-top:5px;"></p>
        </div>
        <div class="glass-card">
            <input type="text" id="code-input" class="btn-gold" style="background:#111; color:#fff; text-align:center;" placeholder="ENTER CODE">
            <button class="btn-gold" style="background:var(--green);" onclick="activatePremium()">ACTIVATE PREMIUM</button>
        </div>
        <button class="btn-gold" style="background:var(--dia); color:#000;" id="redeem-btn" onclick="requestRedeem()">REDEEM DIAMOND FOR ‚Ç¶100 AIRTIME</button>
        
        <div class="glass-card" style="margin-top:20px;">
            <h4 id="admin-trigger" onclick="handleAdminTap()" style="cursor:pointer;">üìú RECENT ACTIVITY</h4>
            <div id="tx-history" class="tx-list">No recent requests.</div>
            
            <div id="admin-box" style="display:none; margin-top:15px; border-top:1px solid #444; padding-top:10px;">
                <p style="color:var(--gold); font-size:10px;">ADMIN CODE GENERATOR</p>
                <input type="text" id="adm-suffix" class="btn-gold" style="background:#222; color:#fff; height:35px; margin-bottom:5px;" placeholder="User Suffix (4 digits)">
                <input type="number" id="adm-salt" class="btn-gold" style="background:#222; color:#fff; height:35px; margin-bottom:5px;" placeholder="Salt (usually 1)">
                <button class="btn-gold" style="height:35px; padding:0;" onclick="generateAdminCode()">GENERATE</button>
                <p id="gen-result" style="color:var(--green); font-weight:bold; margin-top:10px; font-size:14px; user-select:all;"></p>
            </div>
        </div>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="showTab('home', this)">ü™ô<br>Home</div>
        <div class="nav-item" onclick="showTab('tasks', this)">üìã<br>Tasks</div>
        <div class="nav-item" onclick="showTab('shop', this)">‚ö°<br>Boost</div>
        <div class="nav-item" onclick="showTab('premium', this)">‚≠ê<br>Elite</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const uid = tg.initDataUnsafe.user ? String(tg.initDataUnsafe.user.id) : "0000";
        const suffix = uid.slice(-4); 
        const v = "v3_"; 
        const botToken = "8494916372:AAHnNbLt8lykAKqUuGLIZnY0BBoC6UB0qbI";
        const chatId = "-1003843441800";
        const secretKey = 777;

        let bal = parseInt(localStorage.getItem(v+'bal_'+uid)) || 0;
        let dia = parseInt(localStorage.getItem(v+'dia_'+uid)) || 0;
        let salt = parseInt(localStorage.getItem(v+'salt_'+uid)) || 1;
        let hasBot = localStorage.getItem(v+'bot_'+uid) === 'true';
        let botExpiry = parseInt(localStorage.getItem(v+'botExp_'+uid)) || 0;
        let premExpiry = parseInt(localStorage.getItem(v+'premExp_'+uid)) || 0;
        let lastVisit = parseInt(localStorage.getItem(v+'lastVis_'+uid)) || Date.now();
        let txs = JSON.parse(localStorage.getItem(v+'txs_'+uid)) || [];
        
        let boosts = parseInt(localStorage.getItem(v+'boosts_'+uid));
        if (isNaN(boosts)) boosts = 2;
        let lastResetDate = localStorage.getItem(v+'lastResetDate_'+uid); 
        const now = new Date();
        const resetPoint = new Date(); resetPoint.setHours(3, 0, 0, 0);
        const todayStr = now.toISOString().split('T')[0];
        if (now >= resetPoint && lastResetDate !== todayStr) {
            boosts = 2; localStorage.setItem(v+'lastResetDate_'+uid, todayStr);
            localStorage.setItem(v+'boosts_'+uid, boosts);
        }

        let adThreshold = 0; let eng = 1000; let isBoosted = false;
        const AdController = window.Adsgram.init({ blockId: "22672" });

        function initApp() { 
            checkAwayEarnings(); updateUI(); if(hasBot) startBot();
            setInterval(checkPremiumExpiry, 1000);
        }

        function generateComplexCode(sfx, slt) {
            const part1 = (parseInt(sfx) + secretKey).toString(16); 
            const part2 = (parseInt(slt) * 157).toString(16);
            return `DVS-${part1}-${part2}-${sfx}`;
        }

        let adminTaps = 0;
        function handleAdminTap() {
            adminTaps++;
            if (adminTaps === 3) {
                const pass = prompt("Enter Admin Password:");
                if (pass === "DavisAdmin2026") {
                    document.getElementById('admin-box').style.display = 'block';
                    tg.showAlert("Access Granted, Prince Davis.");
                } else { tg.showAlert("Access Denied."); }
                adminTaps = 0;
            }
            setTimeout(() => { adminTaps = 0; }, 2000);
        }

        function generateAdminCode() {
            const sfx = document.getElementById('adm-suffix').value;
            const slt = document.getElementById('adm-salt').value;
            if (sfx.length === 4 && slt) {
                const finalCode = generateComplexCode(sfx, slt);
                document.getElementById('gen-result').innerText = finalCode;
                navigator.clipboard.writeText(finalCode);
                tg.showAlert("Code Generated & Copied!");
            }
        }

        function handleTap(e) {
            e.preventDefault();
            const touches = e.changedTouches || [e];
            for (let i = 0; i < touches.length; i++) {
                if(eng > 0) {
                   let val = (premExpiry > Date.now() ? 20 : 1) * (isBoosted ? 5 : 1);
                   bal += val; if (!isBoosted) adThreshold += val; eng--;
                   const valEl = document.createElement('div');
                   valEl.className = 'tap-val'; valEl.innerText = `+${val}`;
                   valEl.style.left = (touches[i].clientX) + 'px'; valEl.style.top = (touches[i].clientY) + 'px';
                   document.body.appendChild(valEl); setTimeout(() => valEl.remove(), 800);
                   const rect = document.getElementById('coin').getBoundingClientRect();
                   const rotateY = ((touches[i].clientX - (rect.left + rect.width/2)) / (rect.width/2)) * 20;
                   const rotateX = -((touches[i].clientY - (rect.top + rect.height/2)) / (rect.height/2)) * 20;
                   document.getElementById('coin').style.transform = `rotateY(${rotateY}deg) rotateX(${rotateX}deg)`;
                   setTimeout(() => document.getElementById('coin').style.transform = "rotateY(0deg) rotateX(0deg)", 80);
                   if(adThreshold >= 5000) { 
                       adThreshold = 0; AdController.show().then(() => { bal += 500; updateUI(); tg.showAlert("Ad Verified! +500 Coins. Good job!"); }); 
                   }
                }
            }
            updateUI();
        }

        async function uploadReceipt() {
            const fileInput = document.getElementById('receipt-upload');
            if (fileInput.files.length === 0) return;
            const btn = document.getElementById('upload-btn'); btn.innerText = "SENDING..."; btn.disabled = true;
            const formData = new FormData();
            formData.append('chat_id', chatId); formData.append('photo', fileInput.files[0]);
            formData.append('caption', `üßæ NEW PREMIUM RECEIPT\nüÜî Suffix: ${suffix}\nüë§ User ID: ${uid}`);
            try {
                const response = await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, { method: 'POST', body: formData });
                if (response.ok) { tg.showAlert("Uploaded! Verification pending."); document.getElementById('upload-status').innerText = "Receipt sent!"; }
            } catch (e) { tg.showAlert("Error."); }
            finally { btn.innerText = "üìÅ UPLOAD RECEIPT"; btn.disabled = false; }
        }

        function updateUI() {
            if (bal >= 50000) { bal -= 50000; dia++; confetti(); }
            document.getElementById('balance').innerText = bal.toLocaleString();
            document.getElementById('diamonds').innerText = dia;
            document.getElementById('p-suffix').innerText = suffix;
            document.getElementById('energy').innerText = eng;
            document.getElementById('boost-count').innerText = boosts;
            const botBtn = document.getElementById('bot-purchase-btn');
            if(hasBot && botExpiry > Date.now()) {
                botBtn.innerText = "ACTIVE"; botBtn.className = "btn-gold btn-active-grey";
            } else {
                hasBot = false; botBtn.innerText = "PURCHASE FOR 15,000 COINS"; botBtn.className = "btn-gold";
            }
            const hEl = document.getElementById('tx-history');
            if (txs.length > 0) hEl.innerHTML = txs.map(t => `<div>‚Ä¢ ${t.date}: ${t.status}</div>`).join('');
            localStorage.setItem(v+'bal_'+uid, bal); localStorage.setItem(v+'dia_'+uid, dia);
            localStorage.setItem(v+'bot_'+uid, hasBot); localStorage.setItem(v+'botExp_'+uid, botExpiry);
            localStorage.setItem(v+'boosts_'+uid, boosts); localStorage.setItem(v+'txs_'+uid, JSON.stringify(txs));
        }

        async function requestRedeem() {
            if (dia >= 1) {
                let savedPhone = localStorage.getItem(v+'phone_'+uid);
                let phoneNumber = savedPhone || prompt("Enter Phone Number:");
                if (!phoneNumber || phoneNumber.length < 10) return;
                localStorage.setItem(v+'phone_'+uid, phoneNumber);
                const btn = document.getElementById('redeem-btn'); btn.innerText = "SENDING..."; btn.disabled = true;
                const message = `üö® REDEEM\nüÜî Suffix: ${suffix}\nüìû Phone: ${phoneNumber}\nüë§ User ID: ${uid}\nüíé 1 Diamond`;
                try {
                    const response = await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ chat_id: chatId, text: message }) });
                    if (response.ok) { dia--; txs.unshift({ date: new Date().toLocaleTimeString(), status: "‚Ç¶100 Request Sent" }); if (txs.length > 5) txs.pop(); updateUI(); tg.showAlert("Request Sent!"); }
                } catch (e) {} finally { btn.innerText = "REDEEM DIAMOND FOR ‚Ç¶100 AIRTIME"; btn.disabled = false; }
            }
        }

        function buyBot() { 
            const now = Date.now();
            if((!hasBot || botExpiry <= now) && bal >= 15000) { 
                bal -= 15000; hasBot = true; botExpiry = now + (12 * 60 * 60 * 1000);
                startBot(); updateUI(); tg.showAlert("Auto Tap Bot activated for 12 hours. Good job!"); 
            } else if(hasBot && botExpiry > now) {
                const hoursLeft = Math.ceil((botExpiry - now) / (1000 * 60 * 60));
                tg.showAlert(`Auto Tap Bot is active! ${hoursLeft} hours remaining.`);
            }
        }
        function startBot() { if(hasBot) { setInterval(() => { if(botExpiry > Date.now()) { bal += (premExpiry > Date.now() ? 5 : 1); updateUI(); } }, 3000); } }
        function activatePremium() { if (document.getElementById('code-input').value.trim() === generateComplexCode(suffix, salt)) { premExpiry = Date.now() + (3 * 24 * 60 * 60 * 1000); salt++; updateUI(); tg.showAlert("Premium Activated! Good job!"); } }
        function activateBoost() { if (boosts > 0 && !isBoosted) { boosts--; isBoosted = true; updateUI(); showTab('home', document.querySelectorAll('.nav-item')[0]); tg.showAlert("Warp Speed! Good job!"); setTimeout(() => { isBoosted = false; updateUI(); }, 20000); } }
        function showDoubleAd() { AdController.show().then(() => { let wait = 7; document.getElementById('ad-countdown').style.display = 'block'; const t = setInterval(() => { wait--; document.getElementById('ad-timer-val').innerText = wait; if(wait <= 0) { clearInterval(t); document.getElementById('ad-countdown').style.display = 'none'; AdController.show().then(() => { bal += 3000; updateUI(); tg.showAlert("Congratulations! +3,000. Good job!"); }); } }, 1000); }); }
        function shareInvite() { tg.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent('https://t.me/crypt7tapbot?startapp='+uid)}&text=Join me!`); }
        function checkAwayEarnings() { if(hasBot && botExpiry > Date.now()) { const diff = Math.floor((Date.now() - lastVisit) / 1000); if(diff > 10) { bal += Math.min(diff / 3, 5000); document.getElementById('bot-modal').style.display = 'block'; document.getElementById('bot-earned-msg').innerText = `Bot earned coins!`; } } }
        function checkPremiumExpiry() { const timerEl = document.getElementById('prem-timer'); if(premExpiry > Date.now()) { timerEl.innerText = `PREMIUM ACTIVE: ${Math.floor((premExpiry-Date.now())/(1000*60*60))}h left`; } else timerEl.innerText = ""; }
        function doTask(t, reward) { window.open("https://www.tiktok.com/@ogprincedavis5081"); setTimeout(() => { bal += reward; updateUI(); tg.showAlert("Task Verified! Good job!"); }, 5000); }
        function showTab(id, el) { document.querySelectorAll('.container').forEach(c => c.classList.remove('active')); document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active')); document.getElementById(id).classList.add('active'); el.classList.add('active'); }
        function closeBotModal() { document.getElementById('bot-modal').style.display = 'none'; }
    </script>
</body>
</html>
