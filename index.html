<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Crypto_Tap v118.2</title>
    
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <script src='//libtl.com/sdk.js' data-zone='10611291' data-sdk='show_10611291'></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <meta name='admaven-placement' content='Bqjw4qHa4'>
    <script src='https://a.pemsrv.com/admaven.js'></script>
    
    <style>
        :root { --gold: #f3ba2f; --dia: #00d2ff; --bg: #010205; }
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; touch-action: manipulation; }
        body { margin: 0; height: 100vh; overflow: hidden; display: flex; flex-direction: column; font-family: 'Segoe UI', sans-serif; color: white; background: var(--bg); }
        
        /* Navigation */
        .nav { display: flex; justify-content: space-around; background: #111; padding: 15px 0; position: fixed; bottom: 0; width: 100%; border-top: 1px solid #333; z-index: 100; }
        .nav-item { cursor: pointer; opacity: 0.6; transition: 0.3s; font-size: 12px; text-align: center; }
        .nav-item.active { opacity: 1; color: var(--gold); }

        /* Container */
        .container { flex: 1; display: none; flex-direction: column; align-items: center; padding: 20px; overflow-y: auto; padding-bottom: 110px; }
        .container.active { display: flex; }

        /* Coin Styling - Borderless */
        .coin-wrapper { margin: 30px 0; z-index: 5; position: relative; }
        .coin-btn { 
            width: 310px; height: 310px; border-radius: 50%; 
            transition: transform 0.1s ease-out; cursor: pointer;
            background-image: url('https://raw.githubusercontent.com/princedavis010-gif/Prince/refs/heads/main/IMG-20260212-WA0024.jpg');
            background-size: cover; background-position: center;
            border: none; outline: none; box-shadow: none;
        }
        .coin-btn:active { transform: scale(0.95); }

        /* General Button Styling */
        .btn-gold { background: linear-gradient(135deg, var(--gold), #bf9524); color: #221a04; padding: 15px; border-radius: 12px; font-weight: 800; border: none; width: 100%; margin: 5px 0; cursor: pointer; text-transform: uppercase; }
        input { width: 100%; padding: 15px; margin: 10px 0; border-radius: 8px; border: 1px solid #444; background: #221a04; color: white; }
    </style>
</head>
<body onload="initApp()">

    <div id="home" class="container active">
        <div id="balance" style="font-size: 50px; font-weight: 900; color: var(--gold);">0</div>
        
        <div class="coin-wrapper">
            <div class="coin-btn" id="coin" onpointerdown="handleTap(event)"></div>
        </div>
        
        <button class="btn-gold" onclick="showAdsgram()">üì∫ FREE 3,000 COINS</button>
        <button class="btn-gold" style="background: var(--dia);" onclick="showMonetag()">üì∫ FREE 3,000 COINS</button>
        <button class="btn-gold" style="background: #6a5acd; color: white;" onclick="showAdMaven()">üì∫ FREE 3,000 COINS</button>
    </div>

    <div id="withdraw" class="container">
        <h2 style="color: var(--gold);">Withdraw to OPay</h2>
        <input type="text" id="opayName" placeholder="Account Name">
        <input type="number" id="opayNumber" placeholder="OPay Number (8123...)">
        <input type="number" id="withdrawAmount" placeholder="Amount to Withdraw">
        <button class="btn-gold" onclick="requestWithdrawal()">SUBMIT REQUEST</button>
    </div>

    <div id="admin" class="container">
        <h2 style="color: #ff4444;">Admin Panel</h2>
        <div id="adminArea" style="display:none; width: 100%;">
            <button class="btn-gold" onclick="resetAllData()">RESET ALL SYSTEM DATA</button>
            <div id="requestsList" style="margin-top: 20px; background: #222; padding: 10px; border-radius: 10px;"></div>
        </div>
        <input type="password" id="adminPass" placeholder="Admin Key">
        <button class="btn-gold" onclick="checkAdmin()">LOGIN</button>
    </div>

    <div class="nav">
        <div class="nav-item active" onclick="switchTab('home')">üè†<br>HOME</div>
        <div class="nav-item" onclick="switchTab('withdraw')">üí∞<br>CASH</div>
        <div class="nav-item" onclick="switchTab('admin')">‚öôÔ∏è<br>ADMIN</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp; 
        const uid = tg.initDataUnsafe.user ? String(tg.initDataUnsafe.user.id) : "8888";
        let bal = parseInt(localStorage.getItem('tap_bal')) || 0;

        const Adsgram = window.Adsgram.init({ blockId: "22672" });

        function initApp() {
            updateUI();
            tg.expand();
            tg.ready();
        }

        // --- REWARD LOGIC (SILENT) ---
        function giveReward() {
            if (tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
            bal += 3000;
            updateUI();
        }

        // --- AD FUNCTIONS ---
        function showAdsgram() {
            Adsgram.show().then(giveReward).catch(() => {});
        }

        async function showMonetag() {
            if (typeof show_10611291 === 'function') {
                const res = await show_10611291({ telegram_id: uid });
                if (res && res.reward_event_type === 'valued') giveReward();
            }
        }

        function showAdMaven() {
            if (window.AdMaven && typeof window.AdMaven.show === 'function') {
                window.AdMaven.show({
                    placementId: 'Bqjw4qHa4',
                    onCompleted: giveReward,
                    onClosed: () => console.log("Ad finished.")
                });
            }
            // NO ALERT HERE - Silent as requested
        }

        // --- CORE GAME LOGIC ---
        function handleTap(e) {
            e.preventDefault();
            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
            bal++;
            updateUI();
        }

        function updateUI() {
            document.getElementById('balance').innerText = bal.toLocaleString();
            localStorage.setItem('tap_bal', bal);
        }

        function switchTab(id) {
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        // --- ADMIN & WITHDRAWAL ---
        function requestWithdrawal() {
            const name = document.getElementById('opayName').value;
            const num = document.getElementById('opayNumber').value;
            const amt = document.getElementById('withdrawAmount').value;
            if(!name || !num || !amt) return tg.showAlert("Fill all fields");
            
            const req = { name, num, amt, uid, status: 'Pending' };
            let logs = JSON.parse(localStorage.getItem('tx_logs')) || [];
            logs.push(req);
            localStorage.setItem('tx_logs', JSON.stringify(logs));
            tg.showAlert("Request Sent to Admin!");
        }

        function checkAdmin() {
            if(document.getElementById('adminPass').value === "PRINCE") {
                document.getElementById('adminArea').style.display = "block";
                loadRequests();
            }
        }

        function loadRequests() {
            const logs = JSON.parse(localStorage.getItem('tx_logs')) || [];
            const div = document.getElementById('requestsList');
            div.innerHTML = logs.map((r, i) => `
                <div style="border-bottom: 1px solid #444; padding: 10px;">
                    ${r.name} - ${r.amt} Coins<br>${r.num}<br>
                    <button onclick="deleteReq(${i})">PAID/DELETE</button>
                </div>
            `).join('');
        }

        function deleteReq(i) {
            let logs = JSON.parse(localStorage.getItem('tx_logs'));
            logs.splice(i, 1);
            localStorage.setItem('tx_logs', JSON.stringify(logs));
            loadRequests();
        }
    </script>
</body>
</html>
